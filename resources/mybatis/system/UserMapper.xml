<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UserMapper">
	<sql id="userColumns">USERNAME,NAME,PASSWORD,RIGHTS,STATUS,ROLE_ID</sql>
	<resultMap type="com.system.entity.User" id="userResultMap">
		<id column="UUID" property="uuid"/>
		<result column="USER_ID" property="userId"/>
		<result column="USER_NAME" property="userName"/>
		<result column="PASS_WORD" property="passWord"/>
		<result column="ROLE_ID" property="roleId"/>
		<result column="TEL" property="tel"/>
		<result column="MAIL" property="mail"/>
		<result column="IP" property="ip"/>
		<result column="STATUS" property="status"/>
		<result column="LAST_LOGIN_TIME" property="lastLoginTime"/>
		<result column="LAST_MOTIFY_TIME" property="lastMotifyTime"/>
	</resultMap>
	
	<!-- 判断用户名和密码 -->
	<select id="getUserInfo" parameterType="com.system.entity.User" resultMap="userResultMap">
		select * from USER 
		where 1=1
		<if test="userName !=null and passWord !=null ">
		and  ( USER_NAME = #{userName} or TEL=#{userName} or MAIL=#{userName} ) and PASS_WORD=#{passWord}
		</if>
		<if test="userId !=null and userId >0">
		and USER_ID = #{userId}
		</if>
	</select>
	
<!-- 新增用户 -->
	<insert id="saveUser" parameterType="com.system.entity.User" flushCache="false">
		insert into USER (
			UUID            ,
			USER_ID         ,
			USER_NAME       ,
			PASS_WORD       ,
			ROLE_ID         ,
			TEL             ,
			MAIL            ,
			IP              ,
			STATUS          ,
			LAST_LOGIN_TIME ,
			LAST_MOTIFY_TIME
		) values (
			#{uuid},
			#{userId},
			#{userName},
			#{passWord},
			#{roleId},
			#{tel},
			#{mail},
			#{ip},
			#{status},
			#{lastLoginTime},
			#{lastMotifyTime}
		)
	</insert>
	
</mapper>